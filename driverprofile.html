<!DOCTYPE html>
<html lang="en">
<head>
<link rel="icon" type="image/png" href="favicon/favicon-96x96.png" sizes="96x96" />
<link rel="icon" type="image/svg+xml" href="favicon/favicon.svg" />
<link rel="shortcut icon" href="favicon/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="favicon/apple-touch-icon.png" />
<meta name="apple-mobile-web-app-title" content="10 Controls" />
<link rel="manifest" href="favicon/site.webmanifest" />
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>10 Controls</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(to bottom, #492833, #201C1C);
            min-height: 100vh;
        }
        .footer {
            background-color: #492833;
            color: white;
            text-align: center;
            padding: 2rem 1rem;
        }
        #mobile-menu {
            max-height: 0;
            opacity: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-in-out, opacity 0.5s ease-in-out;
            position: absolute;
            width: 100%;
            left: 0;
            top: 100%;
            background-color: #492833;
        }
        #mobile-menu.menu-open {
            max-height: 25rem;
            opacity: 1;
        }
        #desktop-menu-items {
            position: relative;
        }
        #sliding-highlighter {
            position: absolute;
            top: 0;
            left: 0;
            width: 0;
            height: 100%;
            background-color: #492833;
            border-radius: 0.375rem;
            transition: left 0.3s ease-in-out, width 0.3s ease-in-out;
            z-index: -1;
        }
        .hamburger-icon span {
            display: block;
            width: 24px;
            height: 2px;
            background-color: white;
            transition: all 0.3s cubic-bezier(.08,.82,.17,1);
        }
        #mobile-menu-button.open .hamburger-icon span:nth-child(1) {
            transform: translateY(10px) rotate(45deg);
        }
        #mobile-menu-button.open .hamburger-icon span:nth-child(2) {
            opacity: 0;
        }
        #mobile-menu-button.open .hamburger-icon span:nth-child(3) {
            transform: translateY(-10px) rotate(-45deg);
        }
        .mobile-menu-link {
            background-color: #492833;
            transition: background-color 0.2s ease-in-out;
        }
        .mobile-menu-link:hover {
            background-color: #000000;
        }
        .font-display {
            font-family: 'Inter', sans-serif;
        }
    </style>
</head>
<body class="font-medium">

    <header class="bg-black/70 backdrop-blur-sm sticky top-0 z-50 shadow-lg">
        <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-20">
                <div class="flex-shrink-0">
                    <a href="latest.html">
                        <img src="images/10c.png" alt="10 Controls Logo" class="h-10" onerror="this.onerror=null;this.src='https://placehold.co/100x40/492833/FFFFFF?text=Logo';">
                    </a>
                </div>
                <div id="desktop-menu-items" class="hidden md:flex items-center space-x-4">
                    <div id="sliding-highlighter"></div>
                    <a href="latest.html" class="text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium relative z-10">Latest</a>
                    <a href="schedule.html" class="text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium relative z-10">Schedule</a>
                    <a href="standings.html" class="text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium relative z-10">Standings</a>
                    <a href="teams.html" class="text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium relative z-10">Teams</a>
                    <a href="https://discord.gg/khYF6xE5rq" target="_blank" rel="noopener noreferrer" class="text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium relative z-10">Join Now</a>
                </div>
                <div class="-mr-2 flex md:hidden">
                    <button type="button" id="mobile-menu-button" class="inline-flex items-center justify-center p-2 rounded-md text-white focus:outline-none" style="background-color: #492833;">
                        <span class="sr-only">Open main menu</span>
                        <div class="hamburger-icon space-y-2">
                            <span></span><span></span><span></span>
                        </div>
                    </button>
                </div>
            </div>
        </nav>
        <div class="md:hidden" id="mobile-menu">
            <div class="px-2 pt-2 pb-3 space-y-1">
                <a href="latest.html" class="text-white block px-3 py-2 rounded-md text-base font-medium mobile-menu-link">Latest</a>
                <a href="schedule.html" class="text-white block px-3 py-2 rounded-md text-base font-medium mobile-menu-link">Schedule</a>
                <a href="standings.html" class="text-white block px-3 py-2 rounded-md text-base font-medium mobile-menu-link">Standings</a>
                <a href="teams.html" class="text-white block px-3 py-2 rounded-md text-base font-medium mobile-menu-link">Teams</a>
                <a href="https://discord.gg/khYF6xE5rq" target="_blank" rel="noopener noreferrer" class="text-white block px-3 py-2 rounded-md text-base font-medium mobile-menu-link">Join Now</a>
            </div>
        </div>
    </header>

    <!-- Sub-Header for Upcoming Race Info -->
    <div id="sub-header" class="bg-black text-white h-12 transition-opacity duration-300 hidden md:flex">
        <div class="max-w-7xl mx-auto px-2 sm:px-6 lg:px-8 flex items-center justify-between h-full w-full">
            <div class="flex items-center space-x-2 sm:space-x-4">
                <div id="upcoming-race-info" class="text-xs sm:text-sm font-semibold truncate"></div>
                <div id="upcoming-race-date" class="text-xs bg-gray-700/50 px-2 py-1 rounded-md hidden sm:block"></div>
            </div>
            <div class="flex items-center space-x-2 sm:space-x-3 flex-shrink-0">
                <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/d/de/TAG_Heuer_Logo.svg/1200px-TAG_Heuer_Logo.svg.png" alt="TAG Heuer Logo" class="h-6 sm:h-8 w-auto">
                <div class="text-right text-xs sm:text-sm">
                   <p id="client-time" class="font-bold"></p>
                   <p id="race-time" class="text-gray-300"></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Driver Profile and Stats Section -->
    <div id="driver-profile-section" style="background: linear-gradient(to bottom, #492833, #201C1C);">
        <!-- Driver Info Banner -->
        <div id="driver-banner" class="relative flex flex-col md:flex-row items-center justify-between p-8 md:p-12 overflow-hidden">
            <div class="relative z-10 text-center md:text-left flex-shrink-0 mb-8 md:mb-0">
                <h1 id="driver-name" class="font-display text-4xl sm:text-5xl md:text-7xl lg:text-8xl font-bold text-white uppercase"></h1>
                <p id="driver-details" class="flex items-center justify-center md:justify-start text-sm md:text-base text-white mt-2">
                    <img id="driver-flag" src="" alt="Driver Flag" class="h-4 w-auto mr-2 inline-block">
                    <span id="driver-country"></span> <span class="mx-2">â€¢</span> <span id="driver-team"></span>
                </p>
            </div>
            <div class="relative z-10 flex-shrink-0">
                <img id="driver-car-img" src="" alt="F1 Car" class="w-56 md:w-80 h-auto rounded-lg shadow-2xl transform hover:scale-105 transition-transform duration-300">
            </div>
        </div>

        <!-- Statistics Section -->
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:p-8 py-12">
            <h2 class="text-3xl font-bold text-white mb-8 uppercase">Statistics</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-12">
                <!-- 2025 Season Stats -->
                <div>
                    <h3 class="text-xl font-bold text-white mb-6 uppercase">2025 Season</h3>
                    <div id="season-stats-grid" class="grid grid-cols-2 gap-y-4 gap-x-2 text-white"></div>
                </div>
                <!-- Career Stats -->
                <div>
                    <h3 class="text-xl font-bold text-white mb-6 uppercase">Career Stats</h3>
                    <div id="career-stats-grid" class="grid grid-cols-2 gap-y-4 gap-x-2 text-white"></div>
                </div>
            </div>
        </div>
        
        <!-- Recent Races Table Section -->
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:p-8 pt-0 pb-24">
            <h2 class="text-3xl font-bold text-white mb-8 uppercase">Recent Races</h2>
            <div class="rounded-lg shadow-lg overflow-x-auto" style="background-color: #492833;">
                <table class="w-full text-white text-sm">
                    <thead class="border-b border-gray-500">
                        <tr>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider">Grand Prix</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider">Pos</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider">Grid</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider">Stops</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider">Result</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider">Pts</th>
                        </tr>
                    </thead>
                    <tbody id="recent-races-tbody">
                        <!-- Race rows will be injected here by JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Social Media Links & Copyright Footer -->
    <footer class="bg-black text-white text-center py-5 px-2">
        <div class="max-w-7xl mx-auto flex justify-center items-center space-x-6">
            <a href="https://www.twitch.tv/10controls" target="_blank" rel="noopener noreferrer" class="text-white hover:text-gray-300 transition-colors" aria-label="Twitch"><i class="fab fa-twitch fa-lg"></i></a>
            <a href="https://www.instagram.com/10controls/" target="_blank" rel="noopener noreferrer" class="text-white hover:text-gray-300 transition-colors" aria-label="Instagram"><i class="fab fa-instagram fa-lg"></i></a>
            <a href="https://www.youtube.com/@10controls24" target="_blank" rel="noopener noreferrer" class="text-white hover:text-gray-300 transition-colors" aria-label="YouTube"><i class="fab fa-youtube fa-lg"></i></a>
            <a href="https://discord.gg/khYF6xE5rq" target="_blank" rel="noopener noreferrer" class="text-white hover:text-gray-300 transition-colors" aria-label="Discord"><i class="fab fa-discord fa-lg"></i></a>
        </div>
    </footer>
    <footer class="footer">
        <p>Â© 2022-2025 10 Controls Limited</p>
    </footer>
    
    <script>
        // --- DATA STORE ---
        const teamColors = {
            'HOT WHEELS MCLAREN': '#FF8000',
            'NEWPORT ROLEX RED BULL RACING': '#003773',
            'GUINNESS MERCEDES': '#C8CCCE',
            'RACING BULLS PEUGEOT SPORT': '#BBDA0C',
            'SCUDERIA FERRARI HP': '#821729',
            'LOCKHEED MARTIN ASTON MARTIN': '#037A68',
            'TINDER ALPINE F1 TEAM': '#F282B4',
            'HAAS ONLYFANS RACING': '#00AFF0',
            'JOHN DEERE WILLIAMS RACING': '#00A0DE',
            'KICK SAUBER': '#9146FF',
            'TWITCH SAUBER': '#9146FF',
            'Placeholder Team': '#333333'
        };

        const driverData = {
            'focuser': {
                name: 'FOCUSER', team: 'HOT WHEELS MCLAREN', country: 'SPAIN', flagUrl: 'https://cdn-icons-png.flaticon.com/128/197/197593.png', carImageUrl: 'https://media.formula1.com/image/upload/c_lfill,h_224/q_auto/d_common:f1:2025:fallback:car:2025fallbackcarright.webp/v1740000000/common/f1/2025/mclaren/2025mclarencarright.webp',
                baseCareerStats: { 'Grand Prix Entered': 57, 'Wins': 0, 'Podiums': 6, 'Career Points': 360, 'Pole Positions': 0, 'DNFs': 1, 'World Championships': 0 },
                recentRaces: [ { gp: 'Bahrain Grand Prix', flag: 'https://cdn-icons-png.flaticon.com/128/197/197521.png', pos: '2', grid: '3', stops: '2', result: '+10.026', pts: '20' }, { gp: 'Australian Grand Prix', flag: 'https://cdn-icons-png.flaticon.com/128/197/197507.png', pos: '2', grid: '2', stops: '2', result: '+3.552', pts: '20' } ]
            },
            'maxfan1982': {
                name: 'MAXFAN1982', team: 'NEWPORT ROLEX RED BULL RACING', country: 'POLAND', flagUrl: 'https://cdn-icons-png.flaticon.com/128/197/197529.png', carImageUrl: 'https://media.formula1.com/image/upload/c_lfill,h_224/q_auto/d_common:f1:2025:fallback:car:2025fallbackcarright.webp/v1740000000/common/f1/2025/redbullracing/2025redbullracingcarright.webp',
                baseCareerStats: { 'Grand Prix Entered': 28, 'Wins': 1, 'DNFs': 6, 'Pole Positions': 0, 'Career Points': 114, 'Podiums': 1, 'World Championships': 0 },
                recentRaces: [ { gp: 'Bahrain Grand Prix', flag: 'https://cdn-icons-png.flaticon.com/128/197/197521.png', pos: '4', grid: '1', stops: '2', result: '+24.353', pts: '13' }, { gp: 'Australian Grand Prix', flag: 'https://cdn-icons-png.flaticon.com/128/197/197507.png', pos: '1', grid: '1', stops: '2', result: '46:34.539', pts: '25' }]
            },
            'antonchebotarov': {
                name: 'ANTON CHEBOTAROV', team: 'HOT WHEELS MCLAREN', country: 'UKRAINE', flagUrl: 'https://cdn-icons-png.flaticon.com/128/197/197572.png', carImageUrl: 'https://media.formula1.com/image/upload/c_lfill,h_224/q_auto/d_common:f1:2025:fallback:car:2025fallbackcarright.webp/v1740000000/common/f1/2025/mclaren/2025mclarencarright.webp',
                baseCareerStats: { 'Grand Prix Entered': 60, 'Wins': 5, 'DNFs': 5, 'Pole Positions': 4, 'Career Points': 527, 'Podiums': 21, 'World Championships': 0 },
                recentRaces: [ { gp: 'Bahrain Grand Prix', flag: 'https://cdn-icons-png.flaticon.com/128/197/197521.png', pos: '1', grid: '2', stops: '2', result: '45:15:184', pts: '25' }, { gp: 'Australian Grand Prix', flag: 'https://cdn-icons-png.flaticon.com/128/197/197507.png', pos: '11', grid: '4', stops: '2', result: '+25.075', pts: '5' }]
            },
            'sebeinkro': {
                name: 'SEBEINKRO', team: 'GUINNESS MERCEDES', country: 'NORWAY', flagUrl: 'https://cdn-icons-png.flaticon.com/128/197/197579.png', carImageUrl: 'https://media.formula1.com/image/upload/c_lfill,h_224/q_auto/d_common:f1:2025:fallback:car:2025fallbackcarright.webp/v1740000000/common/f1/2025/mercedes/2025mercedescarright.webp',
                baseCareerStats: {'World Championships': 0},
                recentRaces: [ { gp: 'Bahrain Grand Prix', flag: 'https://cdn-icons-png.flaticon.com/128/197/197521.png', pos: '6', grid: '2', stops: '2', result: '+28.709', pts: '10' }, { gp: 'Australian Grand Prix', flag: 'https://cdn-icons-png.flaticon.com/128/197/197507.png', pos: '4', grid: '7', stops: '2', result: '+6.868', pts: '13' }]
            },
            'mora': {
                name: 'MORA', team: 'RACING BULLS PEUGEOT SPORT', country: 'SPAIN', flagUrl: 'https://cdn-icons-png.flaticon.com/128/197/197593.png', carImageUrl: 'https://media.formula1.com/image/upload/c_lfill,h_224/q_auto/d_common:f1:2025:fallback:car:2025fallbackcarright.webp/v1740000000/common/f1/2025/racingbulls/2025racingbullscarright.webp',
                baseCareerStats: { 'Grand Prix Entered': 32, 'Wins': 2, 'DNFs': 7, 'Pole Positions': 8, 'Career Points': 231, 'Podiums': 8, 'World Championships': 0 },
                recentRaces: [ { gp: 'Bahrain Grand Prix', flag: 'https://cdn-icons-png.flaticon.com/128/197/197521.png', pos: '8', grid: '2', stops: '2', result: '+32.937', pts: '8' }, { gp: 'Australian Grand Prix', flag: 'https://cdn-icons-png.flaticon.com/128/197/197507.png', pos: '5', grid: '6', stops: '2', result: '+7.528', pts: '11' }]
            },
            'tonyseroka': {
                name: 'TONY SEROKA', team: 'NEWPORT ROLEX RED BULL RACING', country: 'POLAND', flagUrl: 'https://cdn-icons-png.flaticon.com/128/197/197529.png', carImageUrl: 'https://media.formula1.com/image/upload/c_lfill,h_224/q_auto/d_common:f1:2025:fallback:car:2025fallbackcarright.webp/v1740000000/common/f1/2025/redbullracing/2025redbullracingcarright.webp',
                baseCareerStats: { 'Grand Prix Entered': 3, 'Wins': 0, 'DNFs': 1, 'Pole Positions': 0, 'Career Points': 1, 'Podiums': 0, 'World Championships': 0 },
                recentRaces: [ { gp: 'Bahrain Grand Prix', flag: 'https://cdn-icons-png.flaticon.com/128/197/197521.png', pos: '3', grid: '2', stops: '2', result: '+22.388', pts: '16' }, { gp: 'Australian Grand Prix', flag: 'https://cdn-icons-png.flaticon.com/128/197/197507.png', pos: '14', grid: '3', stops: '3', result: '+33.076', pts: '2' }]
            },
            'maxhousley': {
                name: 'MAX HOUSLEY', team: 'TINDER ALPINE F1 TEAM', country: 'UNITED KINGDOM', flagUrl: 'https://cdn-icons-png.flaticon.com/128/197/197374.png', carImageUrl: 'https://media.formula1.com/image/upload/c_lfill,h_224/q_auto/d_common:f1:2025:fallback:car:2025fallbackcarright.webp/v1740000000/common/f1/2025/alpine/2025alpinecarright.webp',
                baseCareerStats: { 'Grand Prix Entered': 9, 'Wins': 0, 'Podiums': 2, 'Career Points': 72, 'Pole Positions': 0, 'DNFs': 1, 'World Championships': 0 },
                recentRaces: [ { gp: 'Bahrain Grand Prix', flag: 'https://cdn-icons-png.flaticon.com/128/197/197521.png', pos: '14', grid: '12', stops: '2', result: '+1:00.196', pts: '2' }, { gp: 'Australian Grand Prix', flag: 'https://cdn-icons-png.flaticon.com/128/197/197507.png', pos: '3', grid: '10', stops: '3', result: '+4.530', pts: '16' }]
            },
            'tsar': {
                name: 'TSAR', team: 'RACING BULLS PEUGEOT SPORT', country: 'HUNGARY', flagUrl: 'https://cdn-icons-png.flaticon.com/128/197/197584.png', carImageUrl: 'https://media.formula1.com/image/upload/c_lfill,h_224/q_auto/d_common:f1:2025:fallback:car:2025fallbackcarright.webp/v1740000000/common/f1/2025/racingbulls/2025racingbullscarright.webp',
                baseCareerStats: { 'Grand Prix Entered': 3, 'Wins': 0, 'DNFs': 2, 'Pole Positions': 0, 'Career Points': 0, 'Podiums': 0, 'World Championships': 0 },
                recentRaces: [ { gp: 'Bahrain Grand Prix', flag: 'https://cdn-icons-png.flaticon.com/128/197/197521.png', pos: '9', grid: '2', stops: '1', result: '+40.504', pts: '7' }, { gp: 'Australian Grand Prix', flag: 'https://cdn-icons-png.flaticon.com/128/197/197507.png', pos: '8', grid: '12', stops: '3', result: '+12.665', pts: '8' }]
            },
            'cameronclarke': {
                name: 'CAMERON CLARKE', team: 'TWITCH SAUBER', country: 'UNITED KINGDOM', flagUrl: 'https://cdn-icons-png.flaticon.com/128/197/197374.png', carImageUrl: 'https://media.formula1.com/image/upload/c_lfill,h_224/q_auto/d_common:f1:2025:fallback:car:2025fallbackcarright.webp/v1740000000/common/f1/2025/kicksauber/2025kicksaubercarright.webp',
                baseCareerStats: { 'Grand Prix Entered': 51, 'Wins': 0, 'DNFs': 15, 'Pole Positions': 0, 'Career Points': 223, 'Podiums': 3, 'World Championships': 0 },
                recentRaces: [ { gp: 'Bahrain Grand Prix', flag: 'https://cdn-icons-png.flaticon.com/128/197/197521.png', pos: '12', grid: '16', stops: '1', result: '+54.468', pts: '4' }, { gp: 'Australian Grand Prix', flag: 'https://cdn-icons-png.flaticon.com/128/197/197507.png', pos: '7', grid: '13', stops: '3', result: '+12.213', pts: '9' }]
            },
            'alpharomeo127': {
                name: 'ALPHAROMEO127', team: 'SCUDERIA FERRARI HP', country: 'NETHERLANDS', flagUrl: 'https://cdn-icons-png.flaticon.com/128/197/197441.png', carImageUrl: 'https://media.formula1.com/image/upload/c_lfill,h_224/q_auto/d_common:f1:2025:fallback:car:2025fallbackcarright.webp/v1740000000/common/f1/2025/ferrari/2025ferraricarright.webp',
                baseCareerStats: { 'Grand Prix Entered': 19, 'Wins': 0, 'DNFs': 3, 'Pole Positions': 0, 'Career Points': 83, 'Podiums': 2, 'World Championships': 0 },
                recentRaces: [ { gp: 'Bahrain Grand Prix', flag: 'https://cdn-icons-png.flaticon.com/128/197/197521.png', pos: '5', grid: '4', stops: '1', result: '+26.454', pts: '11' }, { gp: 'Australian Grand Prix', flag: 'https://cdn-icons-png.flaticon.com/128/197/197507.png', pos: '20', grid: '5', stops: '0', result: 'DNF', pts: '0' }]
            },
            'lucastevens': {
                name: 'LUCA STEVENS', team: 'LOCKHEED MARTIN ASTON MARTIN', country: 'UNITED KINGDOM', flagUrl: 'https://cdn-icons-png.flaticon.com/128/197/197374.png', carImageUrl: 'https://media.formula1.com/image/upload/c_lfill,h_224/q_auto/d_common:f1:2025:fallback:car:2025fallbackcarright.webp/v1740000000/common/f1/2025/astonmartin/2025astonmartincarright.webp',
                baseCareerStats: { 'Grand Prix Entered': 54, 'Wins': 3, 'Podiums': 14, 'Career Points': 451, 'Pole Positions': 0, 'DNFs': 4, 'World Championships': 0 },
                recentRaces: [ { gp: 'Bahrain Grand Prix', flag: 'https://cdn-icons-png.flaticon.com/128/197/197521.png', pos: '15', grid: '15', stops: '2', result: '+1 LAP', pts: '1' }, { gp: 'Australian Grand Prix', flag: 'https://cdn-icons-png.flaticon.com/128/197/197507.png', pos: '6', grid: '16', stops: '2', result: '+10.799', pts: '10' }]
            },
            'stra': {
                name: 'STRA', team: 'LOCKHEED MARTIN ASTON MARTIN', country: 'SERBIA', flagUrl: 'https://cdn-icons-png.flaticon.com/512/197/197602.png', carImageUrl: 'https://media.formula1.com/image/upload/c_lfill,h_224/q_auto/d_common:f1:2025:fallback:car:2025fallbackcarright.webp/v1740000000/common/f1/2025/astonmartin/2025astonmartincarright.webp',
                baseCareerStats: { 'Grand Prix Entered': 16, 'Wins': 0, 'Podiums': 0, 'Career Points': 53, 'Pole Positions': 0, 'DNFs': 7, 'World Championships': 0 },
                recentRaces: [ { gp: 'Bahrain Grand Prix', flag: 'https://cdn-icons-png.flaticon.com/128/197/197521.png', pos: '7', grid: '9', stops: '2', result: '+29.581', pts: '9' }, { gp: 'Australian Grand Prix', flag: 'https://cdn-icons-png.flaticon.com/128/197/197507.png', pos: '17', grid: '11', stops: '1', result: 'DNF', pts: '0' }]
            },
            'antoniobrancati': {
                name: 'ANTONIO BRANCATI', team: 'SCUDERIA FERRARI HP', country: 'ITALY', flagUrl: 'https://cdn-icons-png.flaticon.com/128/197/197626.png', carImageUrl: 'https://media.formula1.com/image/upload/c_lfill,h_224/q_auto/d_common:f1:2025:fallback:car:2025fallbackcarright.webp/v1740000000/common/f1/2025/ferrari/2025ferraricarright.webp',
                baseCareerStats: { 'Grand Prix Entered': 52, 'Wins': 5, 'DNFs': 9, 'Pole Positions': 6, 'Career Points': 355, 'Podiums': 14, 'World Championships': 0 },
                recentRaces: [ { gp: 'Australian Grand Prix', flag: 'https://cdn-icons-png.flaticon.com/128/197/197507.png', pos: '9', grid: '9', stops: '2', result: '+14.116', pts: '7' }]
            },
            'jstnnl': {
                name: 'JSTN NL', team: 'SCUDERIA FERRARI HP', country: 'NETHERLANDS', flagUrl: 'https://cdn-icons-png.flaticon.com/128/197/197441.png', carImageUrl: 'https://media.formula1.com/image/upload/c_lfill,h_224/q_auto/d_common:f1:2025:fallback:car:2025fallbackcarright.webp/v1740000000/common/f1/2025/ferrari/2025ferraricarright.webp',
                baseCareerStats: {'World Championships': 0},
                recentRaces: [ { gp: 'Bahrain Grand Prix', flag: 'https://cdn-icons-png.flaticon.com/128/197/197521.png', pos: '10', grid: '2', stops: '2', result: '+41.860', pts: '6' }]
            },
            'nojusgedvilas': {
                name: 'NOJUS GEDVILAS', team: 'HAAS ONLYFANS RACING', country: 'LITHUANIA', flagUrl: 'https://cdn-icons-png.flaticon.com/512/197/197612.png', carImageUrl: 'https://media.formula1.com/image/upload/c_lfill,h_224/q_auto/d_common:f1:2025:fallback:car:2025fallbackcarright.webp/v1740000000/common/f1/2025/haas/2025haascarright.webp',
                baseCareerStats: {'World Championships': 0},
                recentRaces: [ { gp: 'Bahrain Grand Prix', flag: 'https://cdn-icons-png.flaticon.com/128/197/197521.png', pos: '17', grid: '14', stops: '2', result: '+1 LAP', pts: '0' }, { gp: 'Australian Grand Prix', flag: 'https://cdn-icons-png.flaticon.com/128/197/197507.png', pos: '10', grid: '17', stops: '2', result: '+22.685', pts: '6' }]
            },
            'aspec33': {
                name: 'ASPEC33', team: 'TINDER ALPINE F1 TEAM', country: 'UNITED KINGDOM', flagUrl: 'https://cdn-icons-png.flaticon.com/128/197/197374.png', carImageUrl: 'https://media.formula1.com/image/upload/c_lfill,h_224/q_auto/d_common:f1:2025:fallback:car:2025fallbackcarright.webp/v1740000000/common/f1/2025/alpine/2025alpinecarright.webp',
                baseCareerStats: {'World Championships': 0},
                recentRaces: [ { gp: 'Bahrain Grand Prix', flag: 'https://cdn-icons-png.flaticon.com/128/197/197521.png', pos: '11', grid: '10', stops: '2', result: '+47.038', pts: '5' }]
            },
            'edge': {
                name: 'EDGE', team: 'HAAS ONLYFANS RACING', country: 'POLAND', flagUrl: 'https://cdn-icons-png.flaticon.com/128/197/197529.png', carImageUrl: 'https://placehold.co/600x400/cccccc/000000?text=Car',
                baseCareerStats: {'World Championships': 0},
                recentRaces: [{ gp: 'Australian Grand Prix', flag: 'https://cdn-icons-png.flaticon.com/128/197/197507.png', pos: '12', grid: '20', stops: '2', result: '+26.424', pts: '4' }]
            },
            'shengen': {
                name: 'SHENGEN', team: 'GUINNESS MERCEDES', country: 'FINLAND', flagUrl: 'https://cdn-icons-png.flaticon.com/128/197/197585.png', carImageUrl: 'https://media.formula1.com/image/upload/c_lfill,h_224/q_auto/d_common:f1:2025:fallback:car:2025fallbackcarright.webp/v1740000000/common/f1/2025/mercedes/2025mercedescarright.webp',
                baseCareerStats: {'World Championships': 0},
                recentRaces: [{ gp: 'Bahrain Grand Prix', flag: 'https://cdn-icons-png.flaticon.com/128/197/197521.png', pos: '13', grid: '2', stops: '2', result: '+54.789', pts: '3' }]
            },
            'rabas': {
                name: 'RABAS', team: 'JOHN DEERE WILLIAMS RACING', country: 'SPAIN', flagUrl: 'https://cdn-icons-png.flaticon.com/128/197/197593.png', carImageUrl: 'https://media.formula1.com/image/upload/c_lfill,h_224/q_auto/d_common:f1:2025:fallback:car:2025fallbackcarright.webp/v1740000000/common/f1/2025/williams/2025williamscarright.webp',
                baseCareerStats: {'World Championships': 0},
                recentRaces: [{ gp: 'Australian Grand Prix', flag: 'https://cdn-icons-png.flaticon.com/128/197/197507.png', pos: '13', grid: '19', stops: '3', result: '+29.581', pts: '3' }]
            },
            'maxlinxc': {
                name: 'MAXLINXC', team: 'HAAS ONLYFANS RACING', country: 'NETHERLANDS', flagUrl: 'https://cdn-icons-png.flaticon.com/128/197/197441.png', carImageUrl: 'https://media.formula1.com/image/upload/c_lfill,h_224/q_auto/d_common:f1:2025:fallback:car:2025fallbackcarright.webp/v1740000000/common/f1/2025/haas/2025haascarright.webp',
                baseCareerStats: {'World Championships': 0},
                recentRaces: [{ gp: 'Australian Grand Prix', flag: 'https://cdn-icons-png.flaticon.com/128/197/197507.png', pos: '15', grid: '8', stops: '3', result: '+3 LAPS', pts: '1' }]
            },
            'aruthlessguy': {
                name: 'A RUTHLESS GUY', team: 'TINDER ALPINE F1 TEAM', country: 'POLAND', flagUrl: 'https://cdn-icons-png.flaticon.com/128/197/197529.png', carImageUrl: 'https://media.formula1.com/image/upload/c_lfill,h_224/q_auto/d_common:f1:2025:fallback:car:2025fallbackcarright.webp/v1740000000/common/f1/2025/alpine/2025alpinecarright.webp',
                baseCareerStats: {'World Championships': 0},
                recentRaces: [{ gp: 'Bahrain Grand Prix', flag: 'https://cdn-icons-png.flaticon.com/128/197/197521.png', pos: '16', grid: '17', stops: '2', result: '+1 LAP', pts: '0' }]
            },
            'loler': {
                name: 'LOLER', team: 'JOHN DEERE WILLIAMS RACING', country: 'POLAND', flagUrl: 'https://cdn-icons-png.flaticon.com/128/197/197529.png', carImageUrl: 'https://media.formula1.com/image/upload/c_lfill,h_224/q_auto/d_common:f1:2025:fallback:car:2025fallbackcarright.webp/v1740000000/common/f1/2025/williams/2025williamscarright.webp',
                baseCareerStats: {'World Championships': 0},
                recentRaces: [{ gp: 'Bahrain Grand Prix', flag: 'https://cdn-icons-png.flaticon.com/128/197/197521.png', pos: '18', grid: '18', stops: '2', result: '+1 LAP', pts: '0' }, { gp: 'Australian Grand Prix', flag: 'https://cdn-icons-png.flaticon.com/128/197/197507.png', pos: '19', grid: '18', stops: '0', result: 'DNF', pts: '0' }]
            },
            'c3z4r': {
                name: 'C3Z4R', team: 'TWITCH SAUBER', country: 'BELGIUM', flagUrl: 'https://cdn-icons-png.flaticon.com/512/197/197583.png', carImageUrl: 'https://media.formula1.com/image/upload/c_lfill,h_224/q_auto/d_common:f1:2025:fallback:car:2025fallbackcarright.webp/v1740000000/common/f1/2025/kicksauber/2025kicksaubercarright.webp',
                baseCareerStats: {'World Championships': 0},
                recentRaces: [{ gp: 'Bahrain Grand Prix', flag: 'https://cdn-icons-png.flaticon.com/128/197/197521.png', pos: '19', grid: '19', stops: '3', result: 'DNF', pts: '0' }]
            },
            'yuliankalenantovich': {
                name: 'YULIAN KALENANTOVICH', team: 'TWITCH SAUBER', country: 'UKRAINE', flagUrl: 'https://cdn-icons-png.flaticon.com/128/197/197572.png', carImageUrl: 'https://media.formula1.com/image/upload/c_lfill,h_224/q_auto/d_common:f1:2025:fallback:car:2025fallbackcarright.webp/v1740000000/common/f1/2025/kicksauber/2025kicksaubercarright.webp',
                baseCareerStats: { 'Grand Prix Entered': 5, 'Wins': 0, 'DNFs': 2, 'Pole Positions': 0, 'Career Points': 2, 'Podiums': 0, 'World Championships': 0 },
                recentRaces: [{ gp: 'Australian Grand Prix', flag: 'https://cdn-icons-png.flaticon.com/128/197/197507.png', pos: '16', grid: '15', stops: '0', result: 'DNF', pts: '0' }]
            },
            'theromaniandevil': {
                name: 'THE ROMANIAN DEVIL', team: 'GUINNESS MERCEDES', country: 'ROMANIA', flagUrl: 'https://cdn-icons-png.flaticon.com/128/197/197587.png', carImageUrl: 'https://media.formula1.com/image/upload/c_lfill,h_224/q_auto/d_common:f1:2025:fallback:car:2025fallbackcarright.webp/v1740000000/common/f1/2025/mercedes/2025mercedescarright.webp',
                baseCareerStats: {'World Championships': 0},
                recentRaces: [{ gp: 'Australian Grand Prix', flag: 'https://cdn-icons-png.flaticon.com/128/197/197507.png', pos: '18', grid: '14', stops: '1', result: 'DNF', pts: '0' }]
            }
        };

        // --- PAGE LOAD LOGIC ---
        window.onload = function() {
            // Calculate season stats for all drivers before loading the page
            calculateAllSeasonStats();
            
            const urlParams = new URLSearchParams(window.location.search);
            const driverKey = (urlParams.get('driver') || 'FOCUSER').replace(/[\s_]/g, '').toUpperCase();
            const foundKey = Object.keys(driverData).find(k => k.replace(/[\s_]/g, '').toUpperCase() === driverKey);
            
            loadDriverData(foundKey || 'FOCUSER');
            setupMenu();
            setupSubHeader();
        };
        
        // --- DATA CALCULATION & LOADING FUNCTIONS ---
        function calculateAllSeasonStats() {
            const standings = [];
            for (const key in driverData) {
                const driver = driverData[key];
                const recentRaces = driver.recentRaces || [];
                
                let seasonPoints = 0;
                let seasonWins = 0;
                let seasonPodiums = 0;
                let seasonPoles = 0;
                let seasonDNFs = 0;
                let seasonTop10s = 0;

                recentRaces.forEach(race => {
                    seasonPoints += parseInt(race.pts || 0);
                    if (race.pos === '1') seasonWins++;
                    if (['1', '2', '3'].includes(race.pos)) seasonPodiums++;
                    if (race.grid === '1') seasonPoles++;
                    if (race.result === 'DNF') seasonDNFs++;
                    if (parseInt(race.pos) <= 10) seasonTop10s++;
                });

                driver.seasonStats = {
                    'Grand Prix Points': seasonPoints,
                    'Grand Prix Races': recentRaces.length,
                    'Wins': seasonWins,
                    'Podiums': seasonPodiums,
                    'Pole Positions': seasonPoles,
                    'DNFs': seasonDNFs,
                    'Grand Prix Top 10s': seasonTop10s
                };
                standings.push({ key: key, points: seasonPoints });
            }
            
            // Sort drivers by points to determine season position
            standings.sort((a, b) => b.points - a.points);
            standings.forEach((driver, index) => {
                const pos = index + 1;
                let suffix = 'th';
                if (pos % 10 === 1 && pos % 100 !== 11) suffix = 'st';
                if (pos % 10 === 2 && pos % 100 !== 12) suffix = 'nd';
                if (pos % 10 === 3 && pos % 100 !== 13) suffix = 'rd';
                driverData[driver.key].seasonStats['Season Position'] = pos + suffix;
            });
        }

        function loadDriverData(driverKey) {
            let driver = driverData[driverKey];
            if (!driver) {
                driver = driverData['FOCUSER'];
            }

            // --- Calculate Combined Career Stats ---
            const baseCareer = driver.baseCareerStats || {};
            const season = driver.seasonStats || {};
            const getStat = (stat) => parseInt(stat || 0, 10);

            const calculatedCareerStats = {
                'Grand Prix Entered': getStat(baseCareer['Grand Prix Entered']) + getStat(season['Grand Prix Races']),
                'Wins': getStat(baseCareer['Wins']) + getStat(season['Wins']),
                'Podiums': getStat(baseCareer['Podiums']) + getStat(season['Podiums']),
                'Career Points': getStat(baseCareer['Career Points']) + getStat(season['Grand Prix Points']),
                'Pole Positions': getStat(baseCareer['Pole Positions']) + getStat(season['Pole Positions']),
                'DNFs': getStat(baseCareer['DNFs']) + getStat(season['DNFs']),
                'World Championships': baseCareer['World Championships'] !== undefined ? baseCareer['World Championships'] : 'N/A'
            };

            // --- Calculate additional stats ---
            const totalRaces = calculatedCareerStats['Grand Prix Entered'];
            const totalWins = calculatedCareerStats['Wins'];
            const totalPodiums = calculatedCareerStats['Podiums'];

            // Highest Race Finish
            let highestFinish = 'N/A';
            if (totalWins > 0) {
                highestFinish = '1st';
            } else if (driver.recentRaces && driver.recentRaces.length > 0) {
                let bestPos = Infinity;
                driver.recentRaces.forEach(race => {
                    const pos = parseInt(race.pos, 10);
                    if (!isNaN(pos) && pos < bestPos) {
                        bestPos = pos;
                    }
                });
                if (bestPos !== Infinity) {
                    let suffix = 'th';
                    if (bestPos % 10 === 1 && bestPos % 100 !== 11) suffix = 'st';
                    if (bestPos % 10 === 2 && bestPos % 100 !== 12) suffix = 'nd';
                    if (bestPos % 10 === 3 && bestPos % 100 !== 13) suffix = 'rd';
                    highestFinish = bestPos + suffix;
                }
            } else if (totalPodiums > 0) {
                highestFinish = 'Top 3';
            }
            calculatedCareerStats['Highest Race Finish'] = highestFinish;

            // Win Percentage
            calculatedCareerStats['Win Percentage'] = totalRaces > 0 ? ((totalWins / totalRaces) * 100).toFixed(1) + '%' : '0.0%';
            
            // Podium Percentage
            calculatedCareerStats['Podium Percentage'] = totalRaces > 0 ? ((totalPodiums / totalRaces) * 100).toFixed(1) + '%' : '0.0%';


            // Update banner
            const banner = document.getElementById('driver-banner');
            const teamColor = teamColors[driver.team] || '#FF8000'; // Default to orange
            banner.style.backgroundColor = teamColor;

            document.getElementById('driver-name').textContent = driver.name;
            document.getElementById('driver-flag').src = driver.flagUrl;
            document.getElementById('driver-country').textContent = driver.country;
            document.getElementById('driver-team').textContent = driver.team;
            document.getElementById('driver-car-img').src = driver.carImageUrl;
            document.getElementById('driver-car-img').alt = driver.team + ' F1 Car';

            // Helper function to populate a stats grid
            const populateStatsGrid = (gridId, stats) => {
                const grid = document.getElementById(gridId);
                grid.innerHTML = ''; // Clear existing stats
                const careerOrder = ['Grand Prix Entered', 'Wins', 'Podiums', 'Career Points', 'Pole Positions', 'DNFs', 'World Championships', 'Highest Race Finish', 'Win Percentage', 'Podium Percentage'];
                const seasonOrder = ['Season Position', 'Grand Prix Points', 'Grand Prix Races', 'Wins', 'Podiums', 'Pole Positions', 'Grand Prix Top 10s', 'DNFs'];
                const order = gridId === 'career-stats-grid' ? careerOrder : seasonOrder;

                for (const label of order) {
                     if (stats[label] !== undefined) {
                         grid.innerHTML += `
                             <div class="flex flex-col">
                                 <span class="text-lg font-semibold text-white">${stats[label]}</span>
                                 <span class="text-sm">${label}</span>
                             </div>
                         `;
                     }
                }
            };
            
            // Populate stats grids
            populateStatsGrid('season-stats-grid', driver.seasonStats);
            populateStatsGrid('career-stats-grid', calculatedCareerStats);

            // Populate recent races table
            const racesTbody = document.getElementById('recent-races-tbody');
            racesTbody.innerHTML = ''; // Clear existing rows
            if(driver.recentRaces && driver.recentRaces.length > 0){
                driver.recentRaces.forEach((race, index) => {
                    const borderClass = index < driver.recentRaces.length - 1 ? 'border-b border-gray-600' : '';
                    racesTbody.innerHTML += `
                        <tr class="${borderClass}">
                            <td class="px-6 py-4 whitespace-nowrap uppercase">
                                <div class="flex items-center">
                                    <img src="${race.flag}" alt="${race.gp} Flag" class="h-4 w-auto mr-3 rounded-sm">
                                    <span>${race.gp}</span>
                                </div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap uppercase">${race.pos}</td>
                            <td class="px-6 py-4 whitespace-nowrap uppercase">${race.grid}</td>
                            <td class="px-6 py-4 whitespace-nowrap uppercase">${race.stops}</td>
                            <td class="px-6 py-4 whitespace-nowrap uppercase">${race.result}</td>
                            <td class="px-6 py-4 whitespace-nowrap font-bold uppercase">${race.pts}</td>
                        </tr>
                    `;
                });
            } else {
                 racesTbody.innerHTML = `<tr><td colspan="6" class="text-center py-4 uppercase">No recent race data available.</td></tr>`;
            }
        }

        // --- UI SETUP FUNCTIONS ---
        function setupMenu() {
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            mobileMenuButton.addEventListener('click', () => {
                mobileMenu.classList.toggle('menu-open');
                mobileMenuButton.classList.toggle('open');
            });
            
            const menuItemsContainer = document.getElementById('desktop-menu-items');
            if (menuItemsContainer) {
                const menuLinks = menuItemsContainer.querySelectorAll('a');
                const highlighter = document.getElementById('sliding-highlighter');
                const activeLink = menuItemsContainer.querySelector('a[aria-current="page"]');

                function setHighlighterToLink(link) {
                    if (!link) return;
                    highlighter.style.left = `${link.offsetLeft}px`;
                    highlighter.style.width = `${link.offsetWidth}px`;
                }
                setHighlighterToLink(activeLink);
                menuLinks.forEach(link => link.addEventListener('mouseenter', () => setHighlighterToLink(link)));
                menuItemsContainer.addEventListener('mouseleave', () => setHighlighterToLink(activeLink));
            }
        }

        function setupSubHeader() {
            // This data is static for the sub-header example.
            const subHeaderScheduleData = [
                { name: 'Emilia Romagna Grand Prix', venue: 'Imola', date: 'June 27th' },
                { name: 'Belgian Grand Prix', venue: 'Spa', date: 'July 4th' }
            ];
             const timeZoneMap = {'Imola': 'Europe/Rome', 'Spa': 'Europe/Brussels'};

            const upcomingRaceInfoEl = document.getElementById('upcoming-race-info');
            const upcomingRaceDateEl = document.getElementById('upcoming-race-date');
            const clientTimeEl = document.getElementById('client-time');
            const raceTimeEl = document.getElementById('race-time');

            const upcomingRace = subHeaderScheduleData[0]; // Simple example, always shows first race
            if (upcomingRace) {
                upcomingRaceInfoEl.textContent = `UPCOMING: ${upcomingRace.name.toUpperCase()}`;
                upcomingRaceDateEl.textContent = upcomingRace.date.toUpperCase();
                const raceTimeZone = timeZoneMap[upcomingRace.venue];

                function updateTimes() {
                    const now = new Date();
                    const timeOptions = { hour: '2-digit', minute: '2-digit', hour12: false };
                    clientTimeEl.textContent = `MY TIME ${now.toLocaleTimeString([], timeOptions)}`;
                    if (raceTimeZone) {
                        raceTimeEl.textContent = `TRACK TIME ${now.toLocaleTimeString([], { ...timeOptions, timeZone: raceTimeZone })}`;
                    } else {
                        raceTimeEl.textContent = `TRACK TIME N/A`;
                    }
                }
                updateTimes();
                setInterval(updateTimes, 60000);
            } else {
                upcomingRaceInfoEl.textContent = "SEASON HAS CONCLUDED";
                if(clientTimeEl && clientTimeEl.parentElement) clientTimeEl.parentElement.style.display = 'none';
            }
        }
    </script>
</body>
</html>
